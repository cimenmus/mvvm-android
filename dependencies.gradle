ext.app = [
        minSdk          : 19, // Android KitKat (4.4)
        targetSdk       : 30, // Android Pie (11.0)
        compileSdk      : 30, // Android Pie (9.0)
        buildTools      : '30.0.2',
        versionCode     : 0,
        versionName     : "v0"
]

ext.java = [
        sourceCompatibility: JavaVersion.VERSION_1_8,
        targetCompatibility: JavaVersion.VERSION_1_8,
]

ext.addRepos = { RepositoryHandler handler ->
    handler.google()
    handler.jcenter()
    handler.mavenCentral()
}

ext.addDependencies = { DependencyHandler handler, dependencies ->
    dependencies.each {
        handler.add(it.configuration, it.dependency, it.options)
    }
}

static def addDependency(config, dependency) {
    [configuration: config, dependency: dependency]
}

def versions = [

        // Gradle Plugin
        androidGradlePlugin                 : '4.1.0',

        // Kotlin
        kotlin                              : '1.4.10',
        coroutines                          : '1.4.0-M1',

        // Android Support
        appcompat                           : "1.2.0",
        material                            : "1.2.1",
        constraintLayout                    : "2.0.2",

        // Android KTX
        kotlinKtx                           : '1.3.2',
        collectionKtx                       : '1.1.0',
        fragmentKtx                         : "1.2.5",

        // Navigation
        navigation                          : "2.3.1",

        // Lifecycle
        lifecycle                           : "2.2.0",

        // Dependency Injection
        dagger                              : "2.16",
        javaxInject                         : '1',

        // Networking
        retrofit                            : '2.8.1',
        okhttp                              : '3.12.2',

        // Database
        room                                : "2.2.2",

        // Serialization
        gson                                : "2.8.6",

        // Other
        multidex                            : "2.0.1",

        // Testing
        junit                               : "4.12",
        junitX                              : "1.1.2",
        espresso                            : "3.3.0",
        runner                              : '1.1.0',
        mockk                               : '1.9',
]

def libraries = [

        // Gradle Plugin
        androidGradlePlugin                 : "com.android.tools.build:gradle:$versions.androidGradlePlugin",
        kotlinGradlePlugin                  : "org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin",
        navigationGradlePlugin              : "androidx.navigation:navigation-safe-args-gradle-plugin:$versions.navigation",

        // Kotlin
        kotlin                              : "org.jetbrains.kotlin:kotlin-stdlib:$versions.kotlin",
        coroutines                          : "org.jetbrains.kotlinx:kotlinx-coroutines-core:$versions.coroutines",

        // Android Support
        appcompat                           : "androidx.appcompat:appcompat:$versions.appcompat",
        material                            : "com.google.android.material:material:$versions.material",
        constraintLayout                    : "androidx.constraintlayout:constraintlayout:$versions.constraintLayout",
        navigationFragment                  : "androidx.navigation:navigation-fragment:$versions.navigation",
        navigationUI                        : "androidx.navigation:navigation-ui:$versions.navigation",

        // Android KTX
        kotlinKtx                           : "androidx.core:core-ktx:$versions.kotlinKtx",
        collectionKtx                       : "androidx.collection:collection-ktx:$versions.collectionKtx",
        fragmentKtx                         : "androidx.fragment:fragment-ktx:$versions.fragmentKtx",
        navigationKtx                       : "androidx.navigation:navigation-runtime-ktx:$versions.navigation",
        navigationUIKtx                     : "androidx.navigation:navigation-ui-ktx:$versions.navigation",
        navigationFragmentKtx               : "androidx.navigation:navigation-fragment-ktx:$versions.navigation",
        lifecycleRuntimeKtx                 : "androidx.lifecycle:lifecycle-runtime-ktx:$versions.lifecycle",
        lifecycleViewModelKtx               : "androidx.lifecycle:lifecycle-viewmodel-ktx:$versions.lifecycle",
        lifecycleLiveDataKtx                : "androidx.lifecycle:lifecycle-livedata-ktx:$versions.lifecycle",
        roomKtx                             : "androidx.room:room-ktx:$versions.room",

        // Lifecycle
        lifecycleExt                        : "androidx.lifecycle:lifecycle-extensions:$versions.lifecycle",
        lifecycleComplier                   : "androidx.lifecycle:lifecycle-compiler:$versions.lifecycle",

        // Dependency Injection
        dagger                              : "com.google.dagger:dagger:$versions.dagger",
        daggerCompiler                      : "com.google.dagger:dagger-compiler:$versions.dagger",
        daggerAndroid                       : "com.google.dagger:dagger-android:$versions.dagger",
        daggerAndroidSupport                : "com.google.dagger:dagger-android-support:$versions.dagger",
        daggerAndroidProcessor              : "com.google.dagger:dagger-android-processor:$versions.dagger",
        javaxInject                         : "javax.inject:javax.inject:$versions.javaxInject",

        // Networking
        retrofit                            : "com.squareup.retrofit2:retrofit:$versions.retrofit",
        retrofitGsonConverter               : "com.squareup.retrofit2:converter-gson:$versions.retrofit",
        okHttp                              : "com.squareup.okhttp3:okhttp:$versions.okhttp",
        okHttpLoggingInterceptor            : "com.squareup.okhttp3:logging-interceptor:$versions.okhttp",

        // Database
        room                                : "androidx.room:room-runtime:$versions.room",
        roomCompiler                        : "androidx.room:room-compiler:$versions.room",

        // Serialization
        gson                                : "com.google.code.gson:gson:$versions.gson",

        // Other
        multidex                            : "androidx.multidex:multidex:$versions.multidex",

        // Testing
        junit                               : "junit:junit:$versions.junit",
        junitX                              : "androidx.test.ext:junit:$versions.junitX",
        espresso                            : "androidx.test.espresso:espresso-core:$versions.espresso",
        runner                              : "androidx.test:runner:$versions.runner",
        mockk                               : "io.mockk:mockk:$versions.mockk",
        mockkAndroid                        : "io.mockk:mockk-android:$versions.mockk",
]

ext.gradlePlugins = [
        android                             : libraries.androidGradlePlugin,
        kotlin                              : libraries.kotlinGradlePlugin,
        navigation                          : libraries.navigationGradlePlugin,
]

ext.appDependencies = [

        // Kotlin
        addDependency('implementation',            libraries.kotlin),
        addDependency('implementation',            libraries.coroutines),

        // Android Support
        addDependency('implementation',            libraries.appcompat),
        addDependency('implementation',            libraries.material),
        addDependency('implementation',            libraries.constraintLayout),
        addDependency('implementation',            libraries.navigationFragment),
        addDependency('implementation',            libraries.navigationUI),

        // Android KTX
        addDependency('implementation',            libraries.kotlinKtx),
        addDependency('implementation',            libraries.fragmentKtx),
        addDependency('implementation',            libraries.navigationKtx),
        addDependency('implementation',            libraries.navigationFragmentKtx),
        addDependency('implementation',            libraries.navigationUIKtx),
        addDependency('implementation',            libraries.lifecycleRuntimeKtx),
        addDependency('implementation',            libraries.lifecycleViewModelKtx),
        addDependency('implementation',            libraries.lifecycleLiveDataKtx),
        addDependency('implementation',            libraries.roomKtx),

        // Lifecycle
        addDependency('implementation',            libraries.lifecycleExt),
        addDependency('kapt',                      libraries.lifecycleComplier),

        // Dependency Injection
        addDependency('implementation',            libraries.dagger),
        addDependency('kapt',                      libraries.daggerCompiler),
        addDependency('implementation',            libraries.daggerAndroid),
        addDependency('implementation',            libraries.daggerAndroidSupport),
        addDependency('kapt',                      libraries.daggerAndroidProcessor),
        addDependency('implementation',            libraries.javaxInject),

        // Networking
        addDependency('implementation',            libraries.retrofit),
        addDependency('implementation',            libraries.retrofitGsonConverter),
        addDependency('implementation',            libraries.okHttp),
        addDependency('implementation',            libraries.okHttpLoggingInterceptor),

        // Database
        addDependency('implementation',            libraries.room),
        addDependency('kapt',                      libraries.roomCompiler),

        // Serialization
        addDependency('implementation',            libraries.gson),

        // Other
        addDependency('implementation',            libraries.multidex),

        // Testing
        addDependency('testImplementation',        libraries.junit),
        addDependency('testImplementation',        libraries.junitX),
        addDependency('androidTestImplementation', libraries.junitX),
        addDependency('testImplementation',        libraries.espresso),
        addDependency('testImplementation',        libraries.runner),
        addDependency('androidTestImplementation', libraries.runner),
        addDependency('implementation',            libraries.mockk),
        addDependency('androidTestImplementation', libraries.mockkAndroid),
]
